{% extends 'website/base.html' %}

{% block custom_css %}
input[type=text] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  box-sizing: border-box;
}
label {
  display: none;
}
{% endblock custom_css %}

{% block content %}
<div class="col-md-4 col-xl-3 update-container">
  <h2>Details For <span id="span-colored" style="color:#{{object.color}}">{{ object.name }}</span></h2>
  <br>
  <form id="profile_update_form" method="post">{% csrf_token %}
      {{ form.as_p }}
      (Click to change color)<input type="color" id="id_color_visible" value="#{{object.color}}">
      <br><br>
      <button id="update_profile" type="submit" class="btn btn-success" name="button">Save Changes</button>
  </form>
</div>
<div class="col-md-7 col-xl-8 update-container">
  <h2>Recordings</h2>
  <table class="table table-striped table-dark table-hover">
      <thead>
        <tr>
          <th>Name</th>
          <th>Activation Key</th>
          <th>Interact</th>
        </tr>
      </thead>
      <tbody>
        {% for recording in object.get_recordings %}
        <tr>
          <th scope="row">{{ recording.name }}</th>
          <td>{{ recording.key_code }}</td>
          <td>
            <i class="fas fa-pencil-alt edit action-link animated item" href="#" style="margin-left:5px;"></i>
            <i class="fas fa-trash-alt delete action-link animated item" href="{% url 'macros:delete_recording' pk=recording.pk %}"></i>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="3">
            You have no recordings for this profile!
            <br><br>
            <button type="button" class="btn btn-success action-link" href="{% url 'macros:save_recording' %}">Save A Recording</button>
          </td>
        </tr>
        {% endfor %}
      </tbody>
  </table>
</div>
{% endblock content %}

{% block js %}
<script type="text/javascript">
  $('#id_color_visible').change(function() {
    $('#id_color').val(
      $('#id_color_visible').val().replace('#', '')
    );
    $('#span-colored').css('color', $('#id_color_visible').val());
  });
</script>
{% endblock js %}
